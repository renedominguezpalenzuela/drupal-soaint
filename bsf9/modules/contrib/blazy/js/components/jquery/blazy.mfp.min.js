!function(u,d,m){"use strict";var a,o,l,h=jQuery,t="b-mfp",i="data-mfp",r="["+i+"-gallery]",c="["+i+"-trigger]",s=d.blazy||{},f=m;function e(i){var e,f,p,n=u.findAll(i,c),t=(f=[],p=(e=n).length,u.each(e,function(i,e){var n,t=u.parse(u.attr(i,"data-media")),a=i.nextElementSibling,o=u.attr(i,"href"),l={el:h(i)},m=l.boxType=t.boxType,r="",c=t.width,s=!1;"image"===m?(n=o,l.type="image"):("html"in t?(s="video"===m,n=t.html,l.type="inline"):"iframe"===m&&(s=!0,n=d.theme("blazyMedia",{el:i}),l.type="inline"),n&&(c&&s&&(r=' style="width:'+c+'px;"'),n='<div class="mfp-html mfp-html--'+m+'"'+r+'><div class="mfp-inner">'+n,a&&(n+='<div class="mfp-bottom-bar"><div class="mfp-title">'+a.innerHTML+'</div><div class="mfp-counter">'+(e+1)+"/"+p+"</div></div>"),n+="</div></div>")),n&&(l.src=n),a&&(l.title=a.innerHTML),f.push(l)}),f);u(i).magnificPopup({items:t,gallery:{enabled:1<n.length,navigateByImgClick:!0,tCounter:"%curr%/%total%"},preloader:!0,callbacks:{beforeClose:function(){var i=this.currItem;i&&i.inlineElement&&v(i.inlineElement[0])},change:function(){g(this,!0)},open:function(){var i=this.wrap;i&&i.length&&setTimeout(function(){u.addClass(i[0],"mfp-on")},100)}},mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(i){return g(this),h(a||i.data.el)}}}),u.on(i,"click",c,function(i){i=a=i.target;o=u.index(i,[".box",".grid",".field__item","li",".slide"]),setTimeout(function(){(l=u.magnificPopup.instance)&&l.goTo(o)})},!1)}function g(i,e){var n,t,a,o,l=i.content;return l&&l.length&&(t=l[0],a=u.find(t,"img"),(o=u.isElm(a))||(l=u.find(t,"video"),!u.isElm(l)||(l=u.attr(l,"poster"))&&((a=m.createElement("img")).decoding="async",a.src=l)),(o=u.isElm(a))&&(n=i.currItem.img=h(a),i.currItem.hasSize=o),e&&u.hasClass(t,"media media-wrapper mfp-html")&&v(t,!0)),n}function v(i,e){var n=u.hasClass(i,"media")?i:u.find(i,".media");u.isElm(n)&&(d.detachBehaviors(n),e&&setTimeout(function(){d.attachBehaviors(n),s&&s.load(n)}))}d.behaviors.blazyMagnificPopup={attach:function(i){var n;f=u.context(i),h&&u.isFun(h.fn.magnificPopup)&&!u.isFun(u.fn.magnificPopup)&&(n=h.fn.magnificPopup,u.fn.magnificPopup=function(i){var e=u(n.apply(this,arguments));return u.isUnd(u.magnificPopup)&&(u.magnificPopup=h.magnificPopup),e}),u.once(e,t,r,f)},detach:function(i,e,n){"unload"===n&&u.once.removeSafely(t,r,f)}}}(dBlazy,Drupal,this.document);
